@model Chocolate.DataAccess.ViewModels.HomeViewModel

@{ ViewData["Title"] = "Home Page"; }

@section styles{
    <link href="~/assets/libs/fullcalendar/fullcalendar.min.css" rel="stylesheet" type="text/css" />
}

<div class="row">
    <div class="col-sm-12">
        <div class="card-box">

            <h4 class="header-title mt-0">Welcome!</h4>
            @if (User.IsInRole("Admin"))
            {
                <div class="row">
                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Department" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#2A9D8F"
                                       data-bgColor="#292e39" value="@Model.Departments" data-readOnly=true />
                                <h5 class="text-muted">Departments</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Employee" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#E9C46A"
                                       data-bgColor="#292e39" value="@Model.Employees" data-readOnly=true />
                                <h5 class="text-muted">Employees</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Position" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#F4A261"
                                       data-bgColor="#292e39" value="@Model.Positions" data-readOnly=true />
                                <h5 class="text-muted">Positions</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Candidate" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#E76F51"
                                       data-bgColor="#292e39" value="@Model.Candidates" data-readOnly=true />
                                <h5 class="text-muted">Candidates</h5>
                            </div>
                        </a>
                    </div><!-- end col-->
                </div><!-- end row -->

                <div class="row">
                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Customer" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#CDB4DB"
                                       data-bgColor="#292e39" value="@Model.Customers" data-readOnly=true />
                                <h5 class="text-muted">Customers</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Order" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#FFC8DD"
                                       data-bgColor="#292e39" value="@Model.Orders" data-readOnly=true />
                                <h5 class="text-muted">Orders</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Purchase" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#FFAFCC"
                                       data-bgColor="#292e39" value="@Model.Purchases" data-readOnly=true />
                                <h5 class="text-muted">Purchases</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Product" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#BDE0FE"
                                       data-bgColor="#292e39" value="@Model.Products" data-readOnly=true />
                                <h5 class="text-muted">Products</h5>
                            </div>
                        </a>
                    </div><!-- end col-->
                </div><!-- end row-->

                <div class="row">
                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="RawMaterial" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#d8e2dc"
                                       data-bgColor="#292e39" value="@Model.RawMaterials" data-readOnly=true />
                                <h5 class="text-muted">Raw Materials</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Supplier" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#B56576"
                                       data-bgColor="#292e39" value="@Model.Suppliers" data-readOnly=true />
                                <h5 class="text-muted">Suppliers</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="Warehouse" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#E56B6F"
                                       data-bgColor="#292e39" value="@Model.Warehouses" data-readOnly=true />
                                <h5 class="text-muted">Warehouses</h5>
                            </div>
                        </a>
                    </div><!-- end col-->

                    <div class="col-md-6 col-xl-3 text-center">
                        <a asp-controller="StorageUnit" asp-action="Index">
                            <div class="mt-3" dir="ltr">
                                <input data-plugin="knob" data-width="150" data-height="150"
                                       data-angleOffset="0" data-fgColor="#EAAC8B"
                                       data-bgColor="#292e39" value="@Model.StorageUnits" data-readOnly=true />
                                <h5 class="text-muted">Storage Units</h5>
                            </div>
                        </a>
                    </div><!-- end col-->
                </div><!-- end row-->
            }

            @if (User.Identity.IsAuthenticated)
            {

                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box d-flex align-items-center justify-content-between">
                            <h4 class="page-title">Calendar</h4>

                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                </ol>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12">

                        <div class="row">
                            <div class="col-lg-12">
                                <div class="card-box">
                                    <div id="calendar"></div>
                                </div>
                            </div> <!-- end col -->
                        </div>  <!-- end row -->
                        <!-- BEGIN MODAL -->
                        <div class="modal fade none-border" id="event-modal">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title mt-0"><strong>Add Meeting</strong></h4>
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    </div>
                                        <div class="form-group">
                                            <form id="meetingForm">
                                                <label class="col-md-2 col-form-label">Title</label>
                                                <div class="col-md-10">
                                                    <input name="Title" id="meetingTitle" class="form-control">
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-md-2 col-form-label">Date</label>
                                                    <div class="col-md-10">
                                                        <input type="datetime-local" id="meetingDate" class="form-control">
                                                    </div>
                                                </div>
                                            </form>
                                        </div>

                                    <div class="modal-footer">
                                        <a id="closeBtn" class="btn btn-light waves-effect" data-dismiss="modal">Close</a>
                                        <a id="btnCreate" class="btn btn-success" style="color:white">Add</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end col-12 -->
                </div> <!-- end row -->
            }
        </div>
    </div><!-- end col-->
</div>
<!-- end row -->

@section Scripts{
    <!-- knob plugin -->
    <script src="~/assets/libs/jquery-knob/jquery.knob.min.js"></script>
    <script src="~/assets/libs/moment/moment.js"></script>
    <script src="~/assets/libs/jquery-ui/jquery-ui.min.js"></script>
    <script src="~/assets/libs/fullcalendar/fullcalendar.min.js"></script>
    <script src="~/src/js/pages/fullcalendar.init.js"></script>

    <script>
        $('#btnCreate').click(function () {
            var title = $('#meetingTitle').val();
            var when = $('#meetingDate').val();

            $.ajax({
                type: "POST",
                url: "/api/meetings",
                data: JSON.stringify({ 'title': title, 'when': when }),
                dataType: "json",
                contentType: "application/json"
            });

            $('#event-modal').modal('hide');
            location.reload();

        });
    </script>
}
